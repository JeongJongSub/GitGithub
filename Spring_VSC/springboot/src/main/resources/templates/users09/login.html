<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org">
<head>
<title>login.html</title>
<th:block th:replace="~{layout/config::config}"></th:block>
<link rel="stylesheet" th:href="@{styles/common.css}">
</head>
<body>
	<div class="container">
		<div class="container-fluid">
			<th:block th:replace="~{layout/header::header}"></th:block>

			<div style="margin-bottom: 55px"></div>
			<!-- fixed-top일때 -->
			<!-- 상단 네비게이션 끝 -->
			<!--  컨텐츠 시작 -->

			<fieldset class="border rounded-3 p-3">
				<legend class="float-none w-auto px-3">로그인</legend>
				
				<div class="alert alert-danger alert-dismissible" th:if="${loginError !=null}">
			       <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
			       <strong>로그인 실패!</strong> <th:block th:text="${loginError}">This alert box could indicate a dangerous or potentially negative action.</th:block>
			    </div>
				
				<!-- 스프링 씨큐리티용 -->
				<!-- /* 
				<div class="alert alert-danger alert-dismissible" th:if="${(not #strings.isEmpty(param.error)) or error !=null}">
			       <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
			       <strong>로그인 실패!</strong> <th:block th:text="${param.error==null?error:param.error }">This alert box could indicate a dangerous or potentially negative action.</th:block>
			    </div>
			    */ -->
				
				<form method="post" th:action="@{/users/loginProcess}">
					<!--타임리프는 csrf활성화(기본값이 활성화)시 아래 토큰값을 보내지 않아도 자동으로 아래 히든 타입이 추가되서 전송된다
					    ※단,ajax나 자바스크립트로 요청시에는 반드시 추가해야 한다-->
					<!--/* 
					<input type="hidden" id="csrfToken" th:if="${_csrf !=null}" th:name="${_csrf.parameterName}"  th:value="${_csrf.token}"/>
					 */-->
		            <div class="mb-3 mt-3">
		                <label for="username" class="form-label">아이디</label>
		                <input type="text" class="form-control" id="username" placeholder="아이디 입력" name="username">
		            </div>
		            <div class="mb-3">
		                <label for="password" class="form-label">비밀번호</label>
		                <input type="password" class="form-control" id="password" placeholder="비밀번호 입력" name="password">
		            </div>		           
		            <button type="submit" class="btn btn-warning">로그인</button>
			      </form>
			</fieldset>
			<!--  컨텐츠 끝 -->
			<!-- 푸터 시작 -->
			<th:block th:replace="~{layout/footer::footer}"></th:block>
			<!-- 푸터 끝 -->
		</div>
		<!-- container-fluid -->
	</div>
	<!-- container -->
	<script th:inline="javascript">
		if('[[${errorMessage}]]' != 'null'){
			const div=document.querySelector('#errorMsg');
			div.classList.add("d-block");
			div.classList.remove("d-none");
		}
	</script>
</body>
</html>