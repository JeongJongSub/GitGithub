<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org">
	<head>
		<title>validation.html</title>		
		<th:block th:replace="~{layout/config::config}"></th:block>
		<link rel="stylesheet" th:href="@{styles/common.css}">
	</head>
	<body>
		<div class="container">
			<div class="container-fluid">
				<th:block th:replace="~{layout/header::header}"></th:block>
				
				<div style="margin-bottom:55px"></div><!-- fixed-top일때 -->
				<!-- 상단 네비게이션 끝 -->
				<!--  컨텐츠 시작 -->
				
				<fieldset class="border rounded-3 p-3">
					<legend class="float-none w-auto px-3">Validation</legend>
					<h1 class="display-6">유효성 검증</h1>
				
					<form th:action="@{/validation/validationForm.do}" method="post" >
						<div class="mb-3 mt-3">
							<!-- 현재 페이지 최초 접속시 form은 null -->
							<label for="name" class="form-label">이름</label> <input
								type="text" class="form-control"
								placeholder="이름 입력"  name="name" id="name" 
								th:value="${form !=null?form.name:''}">
								
								
							<th:block th:if="${form !=null}" th:object="${form}">
								<!-- 에러 메시지 출력 
									 타임 리프의 유틸리티 객체 인 #fields.hasErrors('커맨드객체 필드명') 판단후
									 에러 메시지는 th:errors="*{커맨드객체 필드명}"로 표시
								-->
								<span class="text-danger" th:if="${#fields.hasErrors('name')}" th:errors="*{name}" ></span>
							</th:block>
						</div>	
						<div class="mb-3">
							<label for="age" class="form-label">나이</label> <input
								type="text" class="form-control" id="age"
								placeholder="나이 입력" name="age" th:value="${form !=null?form.age:''}">
								<th:block th:if="${form !=null}" th:object="${form}">								
									<span class="text-danger" th:if="${#fields.hasErrors('age')}" th:errors="*{age}" ></span>
								</th:block>
						</div>
						<div class="mb-3">
							<label class="form-label">성별</label>
							<div class="d-flex">
								<div class="form-check">
									<!-- 체크박스를 선택하지 않고 다시 현재 페이지로 포워드 되면
										 form은 null이 아니지만 form.gender==null이다 -->
									<input type="radio" class="form-check-input" id="radio1"
										name="gender" value="남자"
										th:checked="${form ==null or form.gender ==null?null:#strings.equals(form.gender,'남자')}"
										> <label
										class="form-check-label" for="radio1">남자</label>
									
								</div>
								<div class="form-check mx-3">
									<input type="radio" class="form-check-input" id="radio2"
										name="gender" value="여자" 
										th:checked="${form ==null or form.gender ==null?null:#strings.equals(form.gender,'여자')}"
										> <label
										class="form-check-label" for="radio2">여자</label>
								</div>
								<div class="form-check">
									<input type="radio" class="form-check-input" id="radio3"
										name="gender" value="트랜스젠더"
										th:checked="${form ==null or form.gender ==null?null:#strings.equals(form.gender,'트랜스젠더')}"
										> <label class="form-check-label"
										for="radio3">트랜스젠더</label>
								</div>
								
								<th:block th:if="${form !=null}" th:object="${form}">								
									<span class="text-danger" th:if="${#fields.hasErrors('gender')}" th:errors="*{gender}" ></span>
								</th:block>
								
							</div>
							<div class="my-3">
								<label class="form-label">관심사항</label>
								<div class="d-flex">
									<div class="form-check">
										<input type="checkbox" class="form-check-input" id="check1"
											name="inter" value="정치"
											th:checked="${form==null or form.inter ==null?null:#strings.indexOf(#strings.arrayJoin(form.inter,','),'정치') !=-1}"
											> <label
											class="form-check-label" for="check1">정치</label>
									</div>
									<div class="form-check mx-3">
										<input type="checkbox" class="form-check-input" id="check2"
											name="inter" value="경제" 
											th:checked="${form==null or form.inter==null?null:#strings.indexOf(#strings.arrayJoin(form.inter,','),'경제') !=-1}"
											> <label
											class="form-check-label" for="check2">경제</label>
									</div>
									<div class="form-check">
										<input type="checkbox" class="form-check-input" id="check3"
											name="inter" value="스포츠" 
											th:checked="${form==null or form.inter==null?null:#strings.indexOf(#strings.arrayJoin(form.inter,','),'스') !=-1}"
											> <label
											class="form-check-label" for="check3">스포츠</label>
									</div>
									<div class="form-check mx-3">
										<input type="checkbox" class="form-check-input" id="check4"
											name="inter" value="연예" 
											th:checked="${form==null or form.inter==null?null:#strings.indexOf(#strings.arrayJoin(form.inter,','),'연') !=-1}"
											> <label
											class="form-check-label" for="check4">연예</label>
									</div>
									
								</div>
								
								<th:block th:if="${form !=null}" th:object="${form}">								
									<span class="text-danger" th:if="${#fields.hasErrors('inter')}" th:errors="*{inter}" ></span>
								</th:block>
							</div>
							<label for="sel1" class="form-label">학력사항</label> <select
								class="form-select" id="sel1" name="grade">
								<option value="" >학력을 선택하세요</option>
								<option value="ele" th:selected="${form==null?null:#strings.contains(form.grade,'e')}">초등학교</option>
								<option value="mid" th:selected="${form==null?null:#strings.contains(form.grade,'m')}">중학교</option>
								<option value="hig" th:selected="${form==null?null:#strings.contains(form.grade,'h')}">고등학교</option>
								<option value="uni" th:selected="${form==null?null:#strings.contains(form.grade,'uni')}">대학교</option>
							</select>
							<th:block th:if="${form !=null}" th:object="${form}">								
									<span class="text-danger" th:if="${#fields.hasErrors('grade')}" th:errors="*{grade}" ></span>
								</th:block>
							<div class="my-3">
								<label for="file" class="form-label">첨부파일</label> <input
									type="file" class="form-control" id="file" name="file">
								<th:block th:if="${form !=null}" th:object="${form}">								
									<span class="text-danger" th:if="${#fields.hasErrors('file')}" th:errors="*{file}" ></span>
								</th:block>									
							</div>
							
						</div>
						<button type="submit" class="btn btn-warning">확인</button>
					</form>
				</fieldset>							
				<!--  컨텐츠 끝 -->
				<!-- 푸터 시작 -->
				<th:block th:replace="~{layout/footer::footer}"></th:block>
				<!-- 푸터 끝 -->
			</div><!-- container-fluid -->
		</div><!-- container -->
	</body>
</html>